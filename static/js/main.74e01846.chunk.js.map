{"version":3,"sources":["assets/logo_regular.png","components/FilterSelector.js","components/Application.js","services/api.js","components/IncidentList.js","components/ClientTable.js","components/Dashboard.js","components/PrivateRoute.js","components/LoginForm.js","components/Login.js","AppRoute.js","index.js"],"names":["FilterSelector","props","sendSearchRangeChange","e","searchRangeChange","sendDateRangeChange","dateRangeChange","sendWordSearchChange","wordSearchChange","sendIncludePoliceChange","includePoliceChange","sendIncludeFireChange","includeFireChange","sendIncludeAmbuChange","includeAmbuChange","handleChange","name","event","handleFireChange","setState","checkboxFire","state","handlePolChange","checkboxPol","handleAmbuChange","checkboxAmbu","Slider","progress","min","step","max","defaultValue","onChange","value","console","log","searchRanged","dateRanged","Input","placeholder","Checkbox","checked","this","includeFire","includePol","includeAmbu","React","Component","mapboxgl","accessToken","process","Application","target","lng","lat","zoom","searchRange","dateRange","array","wordSearch","handleDateRangeChange","bind","handleSearchRangeChange","handleWordSearchChange","handleIncludePoliceChange","handleIncludeFireChange","handleIncludeAmbuChange","map","Map","container","mapContainer","style","center","jsonToGeoJson","geojson","type","features","length","Object","keys","i","push","geometry","coordinates","fields","longitude","latitude","properties","monitorcode","comment","emergency_service","priority_code","region","pub_date","on","getCenter","toFixed","getZoom","lngLat","Popup","color","setLngLat","setText","addTo","axios","params","includePolice","then","results","data","getSource","removeLayer","removeSource","addSource","addLayer","id","source","paint","getCanvas","cursor","slice","popup_extra","setHTML","remove","closeButton","closeOnClick","className","src","logo","alt","ref","el","apiUrl","interceptors","request","use","x","response","error","Promise","reject","IncidentList","renderRaise","user","hits","a","get","headers","Authorization","localStorage","getItem","hitzone","number","isPositive","isNegative","paddingLeft","List","bordered","hover","item","Item","ClientTable","clients","Dashboard","PrivateRoute","component","authed","rest","render","to","pathname","from","location","current_environment","window","origin","LoginForm","handle_change","prevstate","newState","handle_login","preventDefault","fetch","method","body","JSON","stringify","res","json","undefined","token","setItem","username","href","catch","password","Form","fluid","top","FormGroup","ControlLabel","FormControl","ButtonToolbar","Button","onClick","appearance","disabled","HelpBlock","tooltip","Login","logged_in","url","handleLoginChange","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","width","height","AppRoute","handle_logout","removeItem","displayed_form","Header","exact","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.74e01846.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo_regular.0709e572.png\";","// https://rsuitejs.com/components/slider/\r\n// dit component voorzien variabelen voor de search query\r\n\r\nimport React from 'react';\r\nimport { Checkbox, Input, Slider } from 'rsuite';\r\n\r\nclass FilterSelector extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      checkboxFire: true,\r\n      checkboxPol: true,\r\n      checkboxAmbu: true\r\n    };\r\n  }\r\n\r\n  sendSearchRangeChange = e => {\r\n    this.props.searchRangeChange(e);\r\n  };\r\n\r\n  sendDateRangeChange = e => {\r\n    this.props.dateRangeChange(e);\r\n  };\r\n\r\n  sendWordSearchChange = e => {\r\n    this.props.wordSearchChange(e);\r\n  };\r\n\r\n  sendIncludePoliceChange = e => {\r\n    this.props.includePoliceChange(e);\r\n  };\r\n\r\n  sendIncludeFireChange = e => {\r\n    this.props.includeFireChange(e);\r\n    // console.log(e)\r\n  };\r\n\r\n  sendIncludeAmbuChange = e => {\r\n    this.props.includeAmbuChange(e);\r\n  };\r\n\r\n  handleChange = (name, event) => {\r\n    this.props.handleChange(name, event);\r\n  };\r\n\r\n  handleFireChange = event => {\r\n    this.setState({\r\n      checkboxFire: !this.state.checkboxFire\r\n    });\r\n\r\n    this.sendIncludeFireChange(this.state.checkboxFire);\r\n  };\r\n\r\n  handlePolChange = event => {\r\n    this.setState({\r\n      checkboxPol: !this.state.checkboxPol\r\n    });\r\n    this.sendIncludePoliceChange(this.state.checkboxPol);\r\n  };\r\n\r\n  handleAmbuChange = event => {\r\n    this.setState({\r\n      checkboxAmbu: !this.state.checkboxAmbu\r\n    });\r\n    this.sendIncludeAmbuChange(this.state.checkboxAmbu);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        How big is the search area in km?\r\n        <Slider\r\n          progress\r\n          min={0.5}\r\n          step={0.5}\r\n          max={20}\r\n          defaultValue={1}\r\n          onChange={value => {\r\n            console.log('radius ' + value);\r\n            this.sendSearchRangeChange(value);\r\n            console.log(this.props.searchRanged);\r\n          }}\r\n        />\r\n        <br />\r\n        Look back how many days?\r\n        <Slider\r\n          progress\r\n          defaultValue={30}\r\n          min={0}\r\n          max={50}\r\n          onChange={value => {\r\n            console.log('date range ' + value);\r\n            this.sendDateRangeChange(value);\r\n            console.log(this.props.dateRanged);\r\n          }}\r\n        />\r\n        <br />\r\n        Filter on other words/values\r\n        <Input\r\n          placeholder=\"ex. 'Brand'\"\r\n          onChange={value => {\r\n            this.sendWordSearchChange(value);\r\n          }}\r\n        />\r\n        <br />\r\n        <Checkbox\r\n          checked={!!this.props.includeFire}\r\n          onChange={this.handleFireChange}\r\n        >\r\n          {' '}\r\n          Brandweer\r\n        </Checkbox>\r\n        <Checkbox\r\n          checked={!!this.props.includePol}\r\n          onChange={this.handlePolChange}\r\n        >\r\n          {' '}\r\n          Politie\r\n        </Checkbox>\r\n        <Checkbox\r\n          checked={!!this.props.includeAmbu}\r\n          onChange={this.handleAmbuChange}\r\n        >\r\n          {' '}\r\n          Ambulance\r\n        </Checkbox>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FilterSelector;\r\n","import * as axios from 'axios';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport React from 'react';\r\n\r\nimport logo from '../assets/logo_regular.png';\r\n\r\nimport FilterSelector from './FilterSelector';\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOXGL_ACCESS_TOKEN;\r\n\r\nclass Application extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      lng: 5.8,\r\n      lat: 52,\r\n      zoom: 7,\r\n      searchRange: 1,\r\n      dateRange: 30,\r\n      array: 0,\r\n      wordSearch: '',\r\n      includeFire: true,\r\n      includePol: true,\r\n      includeAmbu: true\r\n    };\r\n    // this.handleChange = this.handlechange.bind(this)\r\n    this.handleDateRangeChange = this.handleDateRangeChange.bind(this);\r\n    this.handleSearchRangeChange = this.handleSearchRangeChange.bind(this);\r\n    this.handleWordSearchChange = this.handleWordSearchChange.bind(this);\r\n    this.handleIncludePoliceChange = this.handleIncludePoliceChange.bind(this);\r\n    this.handleIncludeFireChange = this.handleIncludeFireChange.bind(this);\r\n    this.handleIncludeAmbuChange = this.handleIncludeAmbuChange.bind(this);\r\n  }\r\n\r\n  //functions to handle changes in filter sliders\r\n  handleChange = name => event => {\r\n    this.setState({ ...this.state, [name]: event.target.checked });\r\n  };\r\n\r\n  handleDateRangeChange(value) {\r\n    this.setState({ dateRange: value });\r\n  }\r\n\r\n  handleSearchRangeChange(value) {\r\n    this.setState({ searchRange: value });\r\n  }\r\n\r\n  handleWordSearchChange(value) {\r\n    this.setState({ wordSearch: value });\r\n  }\r\n\r\n  handleIncludeFireChange(value) {\r\n    this.setState({ includeFire: value });\r\n    console.log('fire new: ' + value);\r\n  }\r\n\r\n  handleIncludePoliceChange(value) {\r\n    this.setState({ includePol: value });\r\n    console.log('police new: ' + value);\r\n  }\r\n\r\n  handleIncludeAmbuChange(value) {\r\n    this.setState({ includeAmbu: value });\r\n    console.log('ambu new: ' + value);\r\n    // console.log('ambu current: ' + this.state.includeAmbu)\r\n  }\r\n\r\n  componentDidMount() {\r\n    const map = new mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: 'mapbox://styles/kdebrauw/ckaxjbuh50ohl1ioo470azefc',\r\n      center: [this.state.lng, this.state.lat],\r\n      zoom: this.state.zoom\r\n    });\r\n\r\n    map.on('move', () => {\r\n      this.setState({\r\n        lng: map.getCenter().lng.toFixed(4),\r\n        lat: map.getCenter().lat.toFixed(4),\r\n        zoom: map.getZoom().toFixed(2)\r\n      });\r\n    });\r\n\r\n    map.on('click', event => {\r\n      const { lat, lng } = event.lngLat;\r\n\r\n      new mapboxgl.Popup({\r\n        color: '#2A3C47'\r\n      })\r\n        .setLngLat(event.lngLat)\r\n        .setText(\r\n          'What happened here in the last ' + this.state.dateRange + ' days?'\r\n        )\r\n        .addTo(map);\r\n\r\n      // localhost: 'http://127.0.0.1:8000/scraper/api/location/'\r\n      // production: 'https://incident-monitor-nl.herokuapp.com/scraper/api/location/'\r\n      axios\r\n        .get(\r\n          'https://incident-monitor-nl.herokuapp.com/scraper/api/location/',\r\n          {\r\n            params: {\r\n              dateRange: this.state.dateRange,\r\n              'location-list': `SRID=4326;POINT(${lng} ${lat})`,\r\n              searchRange: this.state.searchRange,\r\n              wordSearch: this.state.wordSearch,\r\n              includePolice: this.state.includePol,\r\n              includeFire: this.state.includeFire,\r\n              includeAmbu: this.state.includeAmbu\r\n            }\r\n          }\r\n        )\r\n        .then(results => {\r\n          this.results = results.data;\r\n          console.log(jsonToGeoJson(results.data));\r\n\r\n          //update this.state.array with query number results\r\n          this.setState({ array: this.results.length });\r\n\r\n          // if layer exists remove old one\r\n          if (map.getSource('locaties')) {\r\n            map.removeLayer('locaties_waddan');\r\n            map.removeSource('locaties');\r\n          }\r\n\r\n          map.addSource('locaties', {\r\n            type: 'geojson',\r\n            data: jsonToGeoJson(results.data)\r\n          });\r\n\r\n          map.addLayer({\r\n            id: 'locaties_waddan',\r\n            type: 'circle',\r\n            source: 'locaties',\r\n            paint: {\r\n              'circle-radius': 5,\r\n              'circle-stroke-color': '#2A3C47',\r\n              'circle-stroke-width': 1,\r\n              'circle-color': [\r\n                'match',\r\n                ['get', 'emergency_service'],\r\n                'ambu',\r\n                '#EFDC23',\r\n                'br',\r\n                '#D13620',\r\n                'pol',\r\n                '#2134BE',\r\n                'unknown',\r\n                '#3bb2d0',\r\n                /* other */ '#3C3C3D'\r\n              ]\r\n            }\r\n          });\r\n\r\n          map.on('mouseenter', 'locaties_waddan', function (e) {\r\n            map.getCanvas().style.cursor = 'pointer';\r\n\r\n            var coordinates = e.features[0].geometry.coordinates.slice();\r\n            var monitorcode = e.features[0].properties.monitorcode;\r\n            var comment = e.features[0].properties.comment;\r\n            var emergency_service = e.features[0].properties.emergency_service;\r\n            var priority_code = e.features[0].properties.priority_code;\r\n            var pub_date = e.features[0].properties.pub_date;\r\n\r\n            // console.log(coordinates);\r\n            console.log(monitorcode);\r\n\r\n            // Ensure that if the map is zoomed out such that multiple\r\n            // copies of the feature are visible, the popup appears\r\n            // over the copy being pointed to.\r\n\r\n            // while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n            // coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n            // }\r\n\r\n            popup_extra\r\n              .setLngLat(coordinates)\r\n              .setHTML(\r\n                '<H3> Incident </H3>' +\r\n                  pub_date +\r\n                  '<br> <br> Prioriteit: ' +\r\n                  priority_code +\r\n                  '<br> Hulpdienst: ' +\r\n                  emergency_service +\r\n                  '<br> <br> Bericht: ' +\r\n                  comment\r\n              )\r\n              .addTo(map);\r\n          });\r\n\r\n          map.on('mouseleave', 'locaties_waddan', function () {\r\n            map.getCanvas().style.cursor = '';\r\n            popup_extra.remove();\r\n          });\r\n        });\r\n    });\r\n\r\n    function jsonToGeoJson(e) {\r\n      var geojson = {\r\n        type: 'FeatureCollection',\r\n        features: []\r\n      };\r\n      var length = Object.keys(e).length;\r\n\r\n      for (var i = 0; i < length; i++) {\r\n        // if (window.CP.shouldStopExecution(1)) {\r\n        //   break;\r\n        // }\r\n        geojson.features.push({\r\n          type: 'Feature',\r\n          geometry: {\r\n            type: 'Point',\r\n            coordinates: [e[i].fields.longitude, e[i].fields.latitude]\r\n          },\r\n          properties: {\r\n            monitorcode: e[i].fields.monitorcode,\r\n            comment: e[i].fields.comment,\r\n            emergency_service: e[i].fields.emergency_service,\r\n            priority_code: e[i].fields.priority_code,\r\n            region: e[i].fields.region,\r\n            pub_date: e[i].fields.pub_date\r\n          }\r\n        });\r\n      }\r\n      //hallo\r\n\r\n      // window.CP.exitedLoop(1); test\r\n      // var parsed = GeoJSON.parse(file, {Point: ['fields.latitude', 'fields.longitude']})\r\n      return geojson;\r\n    }\r\n\r\n    var popup_extra = new mapboxgl.Popup({\r\n      closeButton: false,\r\n      closeOnClick: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div></div>\r\n        <div className=\"dataHolder\">\r\n          <div>\r\n            <img className=\"logo_home\" src={logo} alt=\"Logo Incidentradar\" />\r\n          </div>\r\n          <div className=\"introbarStyle\">\r\n            <div>Click on the map to explore recent incidents in an area. </div>\r\n          </div>\r\n          <div className=\"hline\" />\r\n          <div className=\"filterStyle\">\r\n            <FilterSelector\r\n              searchRanged={this.state.searchRange}\r\n              dateRanged={this.state.dateRange}\r\n              handleChange={this.handleChange}\r\n              searchRangeChange={this.handleSearchRangeChange}\r\n              dateRangeChange={this.handleDateRangeChange}\r\n              wordSearchChange={this.handleWordSearchChange}\r\n              includePoliceChange={this.handleIncludePoliceChange}\r\n              includeFireChange={this.handleIncludeFireChange}\r\n              includeAmbuChange={this.handleIncludeAmbuChange}\r\n              includeFire={this.state.includeFire}\r\n              includePol={this.state.includePol}\r\n              includeAmbu={this.state.includeAmbu}\r\n            />\r\n          </div>\r\n          <div className=\"sidebarStyle\">\r\n            <div>\r\n              Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom:{' '}\r\n              {this.state.zoom}\r\n            </div>\r\n            <div> Your click returned {this.state.array} results </div>\r\n          </div>\r\n          <div className=\"carthaBar\">\r\n            <div>Designed and powered by Cartha</div>\r\n          </div>\r\n        </div>\r\n        <div ref={el => (this.mapContainer = el)} className=\"mapContainer\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Application;\r\n\r\n// ReactDOM.render(<Application />, document.getElementById('App'));\r\n","// API STUFF\r\nimport axios from 'axios';\r\n\r\n// AXIOS STUFF\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.request.use(x => {\r\n  console.log(x);\r\n  return x;\r\n});\r\n\r\n// interceptor that puts call details in console\r\naxios.interceptors.response.use(\r\n  x => {\r\n    console.log(x);\r\n    return x;\r\n  },\r\n  function (error) {\r\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\r\n    // Do something with response error\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// AXIOS STUFF END\r\n\r\n//Returns the user determined by token in localstorage\r\nexport function getUser() {\r\n  return axios.get(`${apiUrl}/scraper/current_user/`, {\r\n    headers: {\r\n      Authorization: `Token ${localStorage.getItem('token')}`\r\n    }\r\n  });\r\n}\r\n\r\n// returns hits relevant for the user\r\nexport function getIncidentHits() {\r\n  return axios.get(`${apiUrl}/scraper/api/incidentHits/`, {\r\n    headers: {\r\n      Authorization: `Token ${localStorage.getItem('token')}`\r\n    }\r\n  });\r\n}\r\n\r\n// returns tracked/client locations for the user\r\nexport function getClientLocations() {\r\n  return axios.get(\r\n    `${apiUrl}/scraper/api/clientlocationlist`,\r\n    {\r\n      headers: {\r\n        Authorization: `Token ${localStorage.getItem('token')}`\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\n// add a new client location to tracked locations\r\nexport function addClientLocation(data) {\r\n  return axios.post(\r\n    `${apiUrl}/scraper/api/addclientlocation`,\r\n    {\r\n      headers: {\r\n        Authorization: `Token ${localStorage.getItem('token')}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    }\r\n  );\r\n}\r\n\r\n// remove client location from tracked locations\r\nexport function removeClientLocation(data) {\r\n  return axios.delete(\r\n    `${apiUrl}/scraper/api/addclientlocation`,\r\n    {\r\n      headers: {\r\n        Authorization: `Token ${localStorage.getItem('token')}`\r\n      },\r\n      body: JSON.stringify(data)\r\n    }\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { List } from 'rsuite';\r\n\r\nimport { getIncidentHits } from '../services/api';\r\n\r\n// testdata voor list\r\nconst data = [\r\n  {\r\n    title: 'Brand gemeld',\r\n    icon: 'image',\r\n    creator: 'Brandweer',\r\n    date: '2017.10.13 14:50',\r\n    peak: 3223,\r\n    peakRaise: 433,\r\n    uv: 433,\r\n    uvRaise: 33\r\n  },\r\n  {\r\n    title: 'Brand gemeld, auto in brand, vermoedelijk aangestoken',\r\n    icon: 'image',\r\n    creator: 'Brandweer',\r\n    date: '2017.10.13 14:50',\r\n    peak: 3223,\r\n    peakRaise: 238,\r\n    uv: 238,\r\n    uvRaise: 28\r\n  },\r\n  {\r\n    title: 'Loods in Brand, nog niet onder controle',\r\n    icon: 'image',\r\n    creator: 'Brandweer',\r\n    date: '2017.10.13 14:50',\r\n    peak: 4238,\r\n    peakRaise: -239,\r\n    uv: 239,\r\n    uvRaise: 29\r\n  },\r\n  {\r\n    title: 'Ondersteuning bij brand in loods',\r\n    icon: 'image',\r\n    creator: 'Ambulance',\r\n    date: '2017.10.13 14:50',\r\n    peak: 4238,\r\n    peakRaise: 2321,\r\n    uv: 921,\r\n    uvRaise: 91\r\n  },\r\n  {\r\n    title: 'Brand gemeld in loods',\r\n    icon: 'image',\r\n    creator: 'Politie',\r\n    date: '2017.10.13 14:50',\r\n    peak: 2321,\r\n    peakRaise: 1321,\r\n    uv: 321,\r\n    uvRaise: 132\r\n  }\r\n];\r\n\r\nconst data2 = [\r\n  'Roses are red',\r\n  'Violets are blue',\r\n  'Sugar is sweet',\r\n  'And so are you'\r\n];\r\n\r\nconst styleCenter = {\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n  height: '60px'\r\n};\r\n\r\nconst slimText = {\r\n  fontSize: '0.666em',\r\n  color: '#97969B',\r\n  fontWeight: 'lighter',\r\n  paddingBottom: 5\r\n};\r\n\r\nconst titleStyle = {\r\n  paddingBottom: 5,\r\n  whiteSpace: 'nowrap',\r\n  fontWeight: 500\r\n};\r\n\r\nconst dataStyle = {\r\n  fontSize: '1.2em',\r\n  fontWeight: 500\r\n};\r\n\r\nclass IncidentList extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.renderRaise = this.renderRaise.bind(this);\r\n    this.state = {\r\n      user: '',\r\n      hits: []\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const results = await getIncidentHits();\r\n\r\n    this.results = results.data;\r\n    const hitzone = results.data;\r\n    this.setState({ hits: hitzone });\r\n  }\r\n\r\n  renderRaise(number) {\r\n    const isPositive = number > 0;\r\n    const isNegative = number < 0;\r\n\r\n    return (\r\n      <span\r\n        style={{\r\n          paddingLeft: 15,\r\n          color: isNegative ? 'red' : 'green'\r\n        }}\r\n      >\r\n        <span>{isPositive ? '+' : null}</span>\r\n        <span>{number}</span>\r\n      </span>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"listStyle\">\r\n        <List bordered hover>\r\n          {this.state.hits.map(item => (\r\n            <List.Item key={item['pub_date']}>\r\n              {item.monitorcode} <br></br>\r\n              {item.pub_date}\r\n            </List.Item>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n//     render() {\r\n//       return (\r\n//         <List hover>\r\n//           {data.map((item) => (\r\n//             <List.Item key={item['title']} index={index}>\r\n//               <FlexboxGrid>\r\n//                 {/*icon*/}\r\n//                 <FlexboxGrid.Item colspan={2} style={styleCenter}>\r\n//                   <Icon\r\n//                     icon={item['icon']}\r\n//                     style={{\r\n//                       color: 'darkgrey',\r\n//                       fontSize: '1.5em'\r\n//                     }}\r\n//                   />\r\n//                 </FlexboxGrid.Item>\r\n//                 {/*base info*/}\r\n//                 <FlexboxGrid.Item\r\n//                   colspan={6}\r\n//                   style={{\r\n//                     ...styleCenter,\r\n//                     flexDirection: 'column',\r\n//                     alignItems: 'flex-start',\r\n//                     overflow: 'hidden'\r\n//                   }}\r\n//                 >\r\n//                   <div style={titleStyle}>{item['monitorcode']}</div>\r\n//                   <div style={slimText}>\r\n//                     <div>\r\n//                       <Icon icon=\"user-circle-o\" />\r\n//                       {' ' + item['emergency_service']}\r\n//                     </div>\r\n//                     <div>{item['pub_date']}</div>\r\n//                   </div>\r\n//                 </FlexboxGrid.Item>\r\n//                 {/*peak data*/}\r\n//                 <FlexboxGrid.Item colspan={6} style={styleCenter}>\r\n//                   <div style={{ textAlign: 'right' }}>\r\n//                     <div style={slimText}>Top Value</div>\r\n//                     <div style={dataStyle}>{item['address'].toLocaleString()}</div>\r\n//                   </div>\r\n//                   {this.renderRaise(item['peakRaise'])}\r\n//                 </FlexboxGrid.Item>\r\n//                 {/*uv data*/}\r\n//                 <FlexboxGrid.Item colspan={6} style={styleCenter}>\r\n//                   <div style={{ textAlign: 'right' }}>\r\n//                     <div style={slimText}>UV</div>\r\n//                     <div style={dataStyle}>{item['uv'].toLocaleString()}</div>\r\n//                   </div>\r\n//                   {this.renderRaise(item['uvRaise'])}\r\n//                 </FlexboxGrid.Item>\r\n//                 {/*uv data*/}\r\n//                 <FlexboxGrid.Item\r\n//                   colspan={4}\r\n//                   style={{\r\n//                     ...styleCenter\r\n//                   }}\r\n//                 >\r\n//                   {/* link naar kaart [switch naar map view, met zoom niveau & op basis van location]   */}\r\n//                   <a href=\"#\">View on map</a>\r\n//                   <span style={{ padding: 5 }}>|</span>\r\n//                   {/* link naar adres in tabel */}\r\n//                   <a href=\"#\">Customer</a>\r\n//                 </FlexboxGrid.Item>\r\n//               </FlexboxGrid>\r\n//             </List.Item>\r\n//           ))}\r\n//         </List>\r\n//       );\r\n//     }\r\n//   }\r\n\r\nexport default IncidentList;\r\n","import React from 'react';\r\n\r\nimport { getClientLocations } from '../services/api';\r\n\r\nclass ClientTable extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      clients: []\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const results = await getClientLocations();\r\n\r\n    this.results = results.data;\r\n    const clients = results.data;\r\n\r\n    this.setState({ clients: clients });\r\n    console.log(clients);\r\n  }\r\n\r\n  render() {\r\n    return <div>will display clients</div>;\r\n  }\r\n}\r\n\r\nexport default ClientTable;\r\n","import React from 'react';\r\n\r\nimport IncidentList from './IncidentList';\r\nimport ClientTable from './ClientTable';\r\n\r\n//this will be the account dashboard\r\n\r\nclass Dashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      user: ''\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"incidentWidth\">\r\n          <div>\r\n            <IncidentList />\r\n          </div>\r\n        </div>\r\n        <div className=\"clientWidth\">\r\n          <ClientTable />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n","// we use this component to make a route private\r\n\r\nimport React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nfunction PrivateRoute({ component: Component, authed, ...rest }) {\r\n  console.log('user is logged in: ' + authed);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props =>\r\n        authed === true ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect\r\n            to={{ pathname: '/login', state: { from: props.location } }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport {\r\n  Button,\r\n  ButtonToolbar,\r\n  ControlLabel,\r\n  Form,\r\n  FormControl,\r\n  FormGroup,\r\n  HelpBlock\r\n} from 'rsuite';\r\n\r\n//determines current environment for api calls & homepage routing\r\nvar current_environment = window.location.origin;\r\n\r\nclass LoginForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      username: '',\r\n      password: ''\r\n    };\r\n  }\r\n\r\n  handle_change = e => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    this.setState(prevstate => {\r\n      const newState = { ...prevstate };\r\n      newState[name] = value;\r\n      console.log(newState);\r\n\r\n      return newState;\r\n    });\r\n  };\r\n\r\n  handle_login = (e, data) => {\r\n    e.preventDefault();\r\n    fetch(`${current_environment}/token-auth/`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        if (json.token !== undefined) {\r\n          localStorage.setItem('token', json.token);\r\n        }\r\n        this.setState({\r\n          username: json.user.username\r\n        });\r\n        console.log('user: ' + json.user.username);\r\n        // console.log(json.token, typeof json.token)\r\n        // console.log(this.state.username)\r\n\r\n        // console.log(body)\r\n\r\n        // redirect to homepage\r\n\r\n        window.location.href = `${current_environment}`;\r\n      })\r\n      .catch(error => {\r\n        return error;\r\n      });\r\n  };\r\n\r\n  //test\r\n\r\n  render() {\r\n    return (\r\n      <Form fluid>\r\n        <div>\r\n          <h4\r\n            style={{\r\n              color: '#2A3C47',\r\n              top: '40px'\r\n            }}\r\n          >\r\n            Login\r\n          </h4>\r\n        </div>\r\n\r\n        <br />\r\n        <FormGroup>\r\n          <ControlLabel>Username</ControlLabel>\r\n          <FormControl\r\n            name=\"name\"\r\n            onChange={(value, event) => {\r\n              this.handle_change(event);\r\n            }}\r\n          />\r\n          {/* <HelpBlock>Required</HelpBlock> */}\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <ControlLabel>Password</ControlLabel>\r\n          <FormControl\r\n            name=\"password\"\r\n            type=\"password\"\r\n            onChange={(value, event) => {\r\n              this.handle_change(event);\r\n            }}\r\n          />\r\n          {/* <HelpBlock>Required</HelpBlock> */}\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <ButtonToolbar>\r\n            <Button\r\n              color=\"blue\"\r\n              onClick={e => this.handle_login(e, this.state)}\r\n            >\r\n              Login\r\n            </Button>\r\n            <Button appearance=\"default\" disabled>\r\n              Sign up\r\n            </Button>\r\n            <HelpBlock tooltip>Sign up coming soon!</HelpBlock>\r\n          </ButtonToolbar>\r\n        </FormGroup>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n\r\n// LoginForm.propTypes = {\r\n//   handle_login: PropTypes.func.isRequired\r\n// };\r\n","// LOGIN PAGINA\r\n\r\nimport React from 'react';\r\n\r\nimport LoginForm from './LoginForm';\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      logged_in: '',\r\n      url: 'https://i.imgur.com/f59aONW.png'\r\n    };\r\n\r\n    this.handleLoginChange = this.handleLoginChange.bind(this);\r\n  }\r\n\r\n  handleLoginChange(value) {\r\n    this.setState({ logged_in: value });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        style={{\r\n          backgroundImage: `url(\"https://i.imgur.com/f66MsTC.png\")`,\r\n          backgroundSize: 'cover',\r\n          backgroundPosition: 'center',\r\n          backgroundRepeat: 'no-repeat',\r\n          width: '100vw',\r\n          height: '100vh'\r\n        }}\r\n      >\r\n        <div>\r\n          <div className=\"loginExplainer\">\r\n            <div>\r\n              <img\r\n                className=\"logo_home\"\r\n                src=\"https://i.imgur.com/f59aONW.png\"\r\n                alt=\"Logo Incidentradar\"\r\n              />\r\n            </div>\r\n            <div className=\"introbarStyle\">\r\n              <div>\r\n                Verzekeraar, projectontwikkelaar, buurtwacht of beveiliging? De\r\n                Incidentradar helpt sneller en adequater te reageren op\r\n                incidenten om zo negatieve effecten te verminderen en preventie\r\n                te verbeteren.{' '}\r\n              </div>\r\n              <br />\r\n              <br />\r\n              <div>Gebruik de Incidentradar om.. </div>\r\n              <div>\r\n                1. .. automatisch gewaarschuwd te worden als er een incident\r\n                plaatsvindt bij een van je gekozen locaties, waardoor je sneller\r\n                kan reageren en eventuele schade kan beperken.\r\n              </div>\r\n              <div>\r\n                2. .. de eigen risicoanalyse te verdiepen met extra informatie.{' '}\r\n              </div>\r\n              <div>\r\n                3. .. locatie gerelateerde risico inzichten op basis van\r\n                historische data te krijgen. (toekomst)\r\n              </div>\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <br />\r\n              <div>\r\n                De Incidentradar is op dit moment in Private Beta.\r\n                Ge√Ønteresseerd in een demo? Stuur een bericht naar\r\n                koen@cartha.io.{' '}\r\n              </div>\r\n            </div>\r\n            <div className=\"loginHolder\">\r\n              <div></div>\r\n              <div>\r\n                <LoginForm handleLoginChange={this.handleLoginChange} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n","// Dit wordt de automatische routing file die kijkt of de gebruiker\r\n// naar home (index.js) of login (login.js) gaat\r\n//\r\n\r\nimport React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\nimport { Button, ButtonToolbar, Header } from 'rsuite';\r\n\r\nimport Application from './components/Application';\r\nimport Dashboard from './components/Dashboard';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport Login from './components/Login';\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nclass AppRoute extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      displayed_form: '',\r\n      logged_in: localStorage.getItem('token') ? true : false,\r\n      username: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // @Koen: Deze lifecycle hook werd nooit aangeroepen vanwege de hoofdletter C\r\n    //if logged in, change username in state\r\n    // naast naam aanmaken doet dit niets volgens mij.\r\n    // iets vergelijkbaars aanmaken om extra controle uit te voeren\r\n    if (this.state.logged_in) {\r\n      fetch(`${apiUrl}/scraper/current_user/`, {\r\n        headers: {\r\n          Authorization: `JWT ${localStorage.getItem('token')}`\r\n        }\r\n      })\r\n        .then(res => res.json())\r\n        .then(json => {\r\n          this.setState({ username: json.username });\r\n          this.setState({ logged_in: true });\r\n        });\r\n    }\r\n  }\r\n\r\n  // SIGNUP NOT YET IMPLEMENTED\r\n  // handle_signup = (e, data) => {\r\n  //   e.preventDefault();\r\n  //   fetch('http://localhost:8000/scraper/UserList/', {\r\n  //     method: 'POST',\r\n  //     headers: {\r\n  //       'Content-Type': 'application/json'\r\n  //     },\r\n  //     body: JSON.stringify(data)\r\n  //   })\r\n  //     .then(res => res.json())\r\n  //     .then(json => {\r\n  //       localStorage.setItem('token', json.token);\r\n  //       this.setState({\r\n  //         logged_in: true,\r\n  //         displayed_form: '',\r\n  //         username: json.username\r\n  //       });\r\n  //     });\r\n  // };\r\n\r\n  handle_logout = () => {\r\n    localStorage.removeItem('token');\r\n    this.setState({ logged_in: false, username: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div>\r\n          {/* <Nav className='nav' /> */}\r\n          <Header>\r\n            <div>{/* <h1 className='title'>Incidentradar</h1> */}</div>\r\n            <div className=\"navbarStyle\">\r\n              <ButtonToolbar>\r\n                {/* {this.state.logged_in === true && <Link to=\"/\"><Button>Home</Button></Link>}\r\n                {this.state.logged_in === true && <Link to=\"/dashboard\"><Button>Dashboard</Button></Link>} */}\r\n                {this.state.logged_in === true && (\r\n                  <Button onClick={this.handle_logout}>Logout</Button>\r\n                )}\r\n                {/* <IconButton icon={<SearchIcon />}>Find address</IconButton> */}\r\n              </ButtonToolbar>\r\n            </div>\r\n          </Header>\r\n\r\n          <PrivateRoute\r\n            authed={this.state.logged_in}\r\n            exact\r\n            path=\"/\"\r\n            component={Application}\r\n          />\r\n          <Route\r\n            handleLoginChange={this.handleLoginChange}\r\n            path=\"/login\"\r\n            component={Login}\r\n          />\r\n          <PrivateRoute\r\n            authed={this.state.logged_in}\r\n            exact\r\n            path=\"/dashboard\"\r\n            component={Dashboard}\r\n          />\r\n          {/* <Route component={ErrorMessage} /> */}\r\n        </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppRoute;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'rsuite/dist/styles/rsuite-default.css';\r\n\r\nimport AppRoute from './AppRoute';\r\n\r\nReactDOM.render(<AppRoute />, document.getElementById('root'));\r\n"],"sourceRoot":""}