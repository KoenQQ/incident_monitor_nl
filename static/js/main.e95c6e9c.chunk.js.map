{"version":3,"sources":["assets/logo_regular.png","components/FilterSelector.js","components/Application.js","services/api.js","components/IncidentList.js","components/ClientTable.js","components/Minimap.js","components/Dashboard.js","components/PrivateRoute.js","components/LoginForm.js","components/Login.js","AppRoute.js","index.js"],"names":["FilterSelector","props","sendSearchRangeChange","e","searchRangeChange","sendDateRangeChange","dateRangeChange","sendWordSearchChange","wordSearchChange","sendIncludePoliceChange","includePoliceChange","sendIncludeFireChange","includeFireChange","sendIncludeAmbuChange","includeAmbuChange","handleChange","name","event","handleFireChange","setState","checkboxFire","state","handlePolChange","checkboxPol","handleAmbuChange","checkboxAmbu","Slider","progress","min","step","max","defaultValue","onChange","value","console","log","searchRanged","dateRanged","Input","placeholder","Checkbox","checked","this","includeFire","includePol","includeAmbu","React","Component","mapboxgl","accessToken","process","Application","target","lng","lat","zoom","searchRange","dateRange","array","wordSearch","handleDateRangeChange","bind","handleSearchRangeChange","handleWordSearchChange","handleIncludePoliceChange","handleIncludeFireChange","handleIncludeAmbuChange","map","Map","container","mapContainer","style","center","jsonToGeoJson","geojson","type","features","length","Object","keys","i","push","geometry","coordinates","fields","longitude","latitude","properties","monitorcode","comment","emergency_service","priority_code","region","pub_date","on","getCenter","toFixed","getZoom","lngLat","Popup","color","setLngLat","setText","addTo","axios","params","includePolice","then","results","data","getSource","removeLayer","removeSource","addSource","addLayer","id","source","paint","getCanvas","cursor","slice","popup_extra","setHTML","remove","closeButton","closeOnClick","className","src","logo","alt","ref","el","apiUrl","getIncidentHits","get","headers","Authorization","localStorage","getItem","days","getClientLocations","interceptors","request","use","x","response","error","Promise","reject","Column","Table","HeaderCell","Cell","IncidentList","Pagination","renderRaise","user","hits","a","hitzone","es","filtered_hitzone","filter","item","indexOf","sort","d1","d2","Date","getTime","number","isPositive","isNegative","paddingLeft","height","width","onRowClick","resizable","dataKey","fixed","ClientTable","clients","client_fields","client_length","rowData","handleAction","alert","onClick","Minimap","incidents","clientJsonToGeoJson","locatid","client_location","match","split","locilized","address","location","results_i","locatie","Dashboard","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","logo_regular","PrivateRoute","component","authed","rest","render","to","pathname","from","current_environment","window","origin","LoginForm","handle_change","prevstate","newState","handle_login","preventDefault","fetch","method","body","JSON","stringify","res","json","undefined","token","setItem","username","href","catch","password","Form","fluid","top","FormGroup","ControlLabel","FormControl","ButtonToolbar","Button","appearance","disabled","HelpBlock","tooltip","Login","logged_in","url","handleLoginChange","AppRoute","handle_logout","removeItem","displayed_form","Header","exact","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e95c6e9c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo_regular.0709e572.png\";","// https://rsuitejs.com/components/slider/\n// dit component voorzien variabelen voor de search query\n\nimport React from 'react';\nimport { Checkbox, Input, Slider } from 'rsuite';\n\nclass FilterSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      checkboxFire: true,\n      checkboxPol: true,\n      checkboxAmbu: true\n    };\n  }\n\n  sendSearchRangeChange = e => {\n    this.props.searchRangeChange(e);\n  };\n\n  sendDateRangeChange = e => {\n    this.props.dateRangeChange(e);\n  };\n\n  sendWordSearchChange = e => {\n    this.props.wordSearchChange(e);\n  };\n\n  sendIncludePoliceChange = e => {\n    this.props.includePoliceChange(e);\n  };\n\n  sendIncludeFireChange = e => {\n    this.props.includeFireChange(e);\n    // console.log(e)\n  };\n\n  sendIncludeAmbuChange = e => {\n    this.props.includeAmbuChange(e);\n  };\n\n  handleChange = (name, event) => {\n    this.props.handleChange(name, event);\n  };\n\n  handleFireChange = event => {\n    this.setState({\n      checkboxFire: !this.state.checkboxFire\n    });\n\n    this.sendIncludeFireChange(this.state.checkboxFire);\n  };\n\n  handlePolChange = event => {\n    this.setState({\n      checkboxPol: !this.state.checkboxPol\n    });\n    this.sendIncludePoliceChange(this.state.checkboxPol);\n  };\n\n  handleAmbuChange = event => {\n    this.setState({\n      checkboxAmbu: !this.state.checkboxAmbu\n    });\n    this.sendIncludeAmbuChange(this.state.checkboxAmbu);\n  };\n\n  render() {\n    return (\n      <div>\n        How big is the search area in km?\n        <Slider\n          progress\n          min={0.5}\n          step={0.5}\n          max={20}\n          defaultValue={1}\n          onChange={value => {\n            console.log('radius ' + value);\n            this.sendSearchRangeChange(value);\n            console.log(this.props.searchRanged);\n          }}\n        />\n        <br />\n        Look back how many days?\n        <Slider\n          progress\n          defaultValue={30}\n          min={0}\n          max={50}\n          onChange={value => {\n            console.log('date range ' + value);\n            this.sendDateRangeChange(value);\n            console.log(this.props.dateRanged);\n          }}\n        />\n        <br />\n        Filter on other words/values\n        <Input\n          placeholder=\"ex. 'Brand'\"\n          onChange={value => {\n            this.sendWordSearchChange(value);\n          }}\n        />\n        <br />\n        <Checkbox\n          checked={!!this.props.includeFire}\n          onChange={this.handleFireChange}\n        >\n          {' '}\n          Brandweer\n        </Checkbox>\n        <Checkbox\n          checked={!!this.props.includePol}\n          onChange={this.handlePolChange}\n        >\n          {' '}\n          Politie\n        </Checkbox>\n        <Checkbox\n          checked={!!this.props.includeAmbu}\n          onChange={this.handleAmbuChange}\n        >\n          {' '}\n          Ambulance\n        </Checkbox>\n      </div>\n    );\n  }\n}\n\nexport default FilterSelector;\n","import * as axios from 'axios';\nimport mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport React from 'react';\n\nimport logo from '../assets/logo_regular.png';\n\nimport FilterSelector from './FilterSelector';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOXGL_ACCESS_TOKEN;\nconst apiUrl = process.env.REACT_APP_API_URL;\n\nclass Application extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      lng: 5.8,\n      lat: 52,\n      zoom: 7,\n      searchRange: 1,\n      dateRange: 30,\n      array: 0,\n      wordSearch: '',\n      includeFire: true,\n      includePol: true,\n      includeAmbu: true\n    };\n    // this.handleChange = this.handlechange.bind(this)\n    this.handleDateRangeChange = this.handleDateRangeChange.bind(this);\n    this.handleSearchRangeChange = this.handleSearchRangeChange.bind(this);\n    this.handleWordSearchChange = this.handleWordSearchChange.bind(this);\n    this.handleIncludePoliceChange = this.handleIncludePoliceChange.bind(this);\n    this.handleIncludeFireChange = this.handleIncludeFireChange.bind(this);\n    this.handleIncludeAmbuChange = this.handleIncludeAmbuChange.bind(this);\n  }\n\n  //functions to handle changes in filter sliders\n  handleChange = name => event => {\n    this.setState({ ...this.state, [name]: event.target.checked });\n  };\n\n  handleDateRangeChange(value) {\n    this.setState({ dateRange: value });\n  }\n\n  handleSearchRangeChange(value) {\n    this.setState({ searchRange: value });\n  }\n\n  handleWordSearchChange(value) {\n    this.setState({ wordSearch: value });\n  }\n\n  handleIncludeFireChange(value) {\n    this.setState({ includeFire: value });\n    console.log('fire new: ' + value);\n  }\n\n  handleIncludePoliceChange(value) {\n    this.setState({ includePol: value });\n    console.log('police new: ' + value);\n  }\n\n  handleIncludeAmbuChange(value) {\n    this.setState({ includeAmbu: value });\n    console.log('ambu new: ' + value);\n    // console.log('ambu current: ' + this.state.includeAmbu)\n  }\n\n  componentDidMount() {\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/kdebrauw/ckaxjbuh50ohl1ioo470azefc',\n      center: [this.state.lng, this.state.lat],\n      zoom: this.state.zoom\n    });\n\n    map.on('move', () => {\n      this.setState({\n        lng: map.getCenter().lng.toFixed(4),\n        lat: map.getCenter().lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2)\n      });\n    });\n\n    map.on('click', event => {\n      const { lat, lng } = event.lngLat;\n\n      new mapboxgl.Popup({\n        color: '#2A3C47'\n      })\n        .setLngLat(event.lngLat)\n        .setText(\n          'What happened here in the last ' + this.state.dateRange + ' days?'\n        )\n        .addTo(map);\n\n      // localhost: 'http://127.0.0.1:8000/scraper/api/location/'\n      // production: 'https://incident-monitor-nl.herokuapp.com/scraper/api/location/'\n      axios\n        .get(\n          `${apiUrl}/scraper/api/location/`,\n          {\n            params: {\n              dateRange: this.state.dateRange,\n              'location-list': `SRID=4326;POINT(${lng} ${lat})`,\n              searchRange: this.state.searchRange,\n              wordSearch: this.state.wordSearch,\n              includePolice: this.state.includePol,\n              includeFire: this.state.includeFire,\n              includeAmbu: this.state.includeAmbu\n            }\n          }\n        )\n        .then(results => {\n          this.results = results.data;\n          console.log(jsonToGeoJson(results.data));\n\n          //update this.state.array with query number results\n          this.setState({ array: this.results.length });\n            \n          // if layer exists remove old one\n          if (map.getSource('locaties')) {\n            map.removeLayer('locaties_waddan');\n            map.removeSource('locaties');\n          }\n\n          map.addSource('locaties', {\n            type: 'geojson',\n            data: jsonToGeoJson(results.data)\n          });\n\n          map.addLayer({\n            id: 'locaties_waddan',\n            type: 'circle',\n            source: 'locaties',\n            paint: {\n              'circle-radius': 5,\n              'circle-stroke-color': '#2A3C47',\n              'circle-stroke-width': 1,\n              'circle-color': [\n                'match',\n                ['get', 'emergency_service'],\n                'ambu',\n                '#EFDC23',\n                'br',\n                '#D13620',\n                'pol',\n                '#2134BE',\n                'unknown',\n                '#3bb2d0',\n                /* other */ '#3C3C3D'\n              ]\n            }\n          });\n\n          map.on('mouseenter', 'locaties_waddan', function (e) {\n            map.getCanvas().style.cursor = 'pointer';\n\n            var coordinates = e.features[0].geometry.coordinates.slice();\n            var monitorcode = e.features[0].properties.monitorcode;\n            var comment = e.features[0].properties.comment;\n            var emergency_service = e.features[0].properties.emergency_service;\n            var priority_code = e.features[0].properties.priority_code;\n            var pub_date = e.features[0].properties.pub_date;\n\n            // console.log(coordinates);\n            console.log(monitorcode);\n\n            // Ensure that if the map is zoomed out such that multiple\n            // copies of the feature are visible, the popup appears\n            // over the copy being pointed to.\n\n            // while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            // coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n            // }\n\n            popup_extra\n              .setLngLat(coordinates)\n              .setHTML(\n                '<H3> Incident </H3>' +\n                  pub_date +\n                  '<br> <br> Prioriteit: ' +\n                  priority_code +\n                  '<br> Hulpdienst: ' +\n                  emergency_service +\n                  '<br> <br> Bericht: ' +\n                  comment\n              )\n              .addTo(map);\n          });\n\n          map.on('mouseleave', 'locaties_waddan', function () {\n            map.getCanvas().style.cursor = '';\n            popup_extra.remove();\n          });\n        });\n    });\n\n    function jsonToGeoJson(e) {\n      var geojson = {\n        type: 'FeatureCollection',\n        features: []\n      };\n      var length = Object.keys(e).length;\n\n      for (var i = 0; i < length; i++) {\n        // if (window.CP.shouldStopExecution(1)) {\n        //   break;\n        // }\n        geojson.features.push({\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: [e[i].fields.longitude, e[i].fields.latitude]\n          },\n          properties: {\n            monitorcode: e[i].fields.monitorcode,\n            comment: e[i].fields.comment,\n            emergency_service: e[i].fields.emergency_service,\n            priority_code: e[i].fields.priority_code,\n            region: e[i].fields.region,\n            pub_date: e[i].fields.pub_date\n          }\n        });\n      }\n\n      // window.CP.exitedLoop(1); test\n      // var parsed = GeoJSON.parse(file, {Point: ['fields.latitude', 'fields.longitude']})\n      return geojson;\n    }\n\n    var popup_extra = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div></div>\n        <div className=\"dataHolder\">\n          <div>\n            <img className=\"logo_home\" src={logo} alt=\"Logo Incidentradar\" />\n          </div>\n          <div className=\"introbarStyle\">\n            <div>Click on the map to explore recent incidents in an area. </div>\n          </div>\n          <div className=\"hline\" />\n          <div className=\"filterStyle\">\n            <FilterSelector\n              searchRanged={this.state.searchRange}\n              dateRanged={this.state.dateRange}\n              handleChange={this.handleChange}\n              searchRangeChange={this.handleSearchRangeChange}\n              dateRangeChange={this.handleDateRangeChange}\n              wordSearchChange={this.handleWordSearchChange}\n              includePoliceChange={this.handleIncludePoliceChange}\n              includeFireChange={this.handleIncludeFireChange}\n              includeAmbuChange={this.handleIncludeAmbuChange}\n              includeFire={this.state.includeFire}\n              includePol={this.state.includePol}\n              includeAmbu={this.state.includeAmbu}\n            />\n          </div>\n          <div className=\"sidebarStyle\">\n            <div>\n              Longitude: {this.state.lng} | Latitude: {this.state.lat} | Zoom:{' '}\n              {this.state.zoom}\n            </div>\n            <div> Your click returned {this.state.array} results </div>\n          </div>\n          <div className=\"carthaBar\">\n            <div>Designed and powered by Cartha</div>\n          </div>\n        </div>\n        <div ref={el => (this.mapContainer = el)} className=\"mapContainer\" />\n      </div>\n    );\n  }\n}\n\nexport default Application;\n\n// ReactDOM.render(<Application />, document.getElementById('App'));\n","// API STUFF\nimport axios from 'axios';\n\n// AXIOS STUFF\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\naxios.interceptors.request.use(x => {\n  console.log(x);\n  return x;\n});\n\n// interceptor that puts call details in console\naxios.interceptors.response.use(\n  x => {\n    console.log(x);\n    return x;\n  },\n  function (error) {\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\n    // Do something with response error\n    return Promise.reject(error);\n  }\n);\n\n// AXIOS STUFF END\n\n//Returns the user determined by token in localstorage\nexport function getUser() {\n  return axios.get(`${apiUrl}/scraper/current_user/`, {\n    headers: {\n      Authorization: `Token ${localStorage.getItem('token')}`\n    }\n  });\n}\n\n// returns hits relevant for the user\nexport function getIncidentHits() {\n  return axios.get(`https://api.incidentradar.com/scraper/api/incidentHits/`, {\n    headers: {\n      Authorization: `Token ${localStorage.getItem('token')}`\n    },\n    params: {\n      days: '10'\n    }\n  });\n}\n\n// returns tracked/client locations for the user\nexport function getClientLocations() {\n  return axios.get(\n    `${apiUrl}/scraper/api/clientlocationlist/`,\n    {\n      headers: {\n        Authorization: `Token ${localStorage.getItem('token')}`\n      }\n    }\n  );\n}\n\n// add a new client location to tracked locations\nexport function addClientLocation(data) {\n  return axios.post(\n    `${apiUrl}/scraper/api/addclientlocation`,\n    {\n      headers: {\n        Authorization: `Token ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify(data)\n    }\n  );\n}\n\n// remove client location from tracked locations\nexport function removeClientLocation(data) {\n  return axios.delete(\n    `${apiUrl}/scraper/api/addclientlocation`,\n    {\n      headers: {\n        Authorization: `Token ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify(data)\n    }\n  );\n}\n","import React from 'react';\nimport { List, Table } from 'rsuite';\nimport { getIncidentHits, getClientLocations } from '../services/api';\n\nconst { Column, HeaderCell, Cell, Pagination } = Table;\n\n\nclass IncidentList extends React.Component {\n  constructor() {\n    super();\n    this.renderRaise = this.renderRaise.bind(this);\n    this.state = {\n      user: '',\n      hits: []\n    };\n  }\n\n  async componentDidMount() {\n    const results = await getIncidentHits();\n\n    this.results = results.data;\n    const hitzone = results.data;\n    const es = ['ambu', '']\n    const filtered_hitzone = hitzone.filter(function(item){\n      return es.indexOf(item.emergency_service)}) \n    filtered_hitzone.sort((d1, d2) => new Date(d2.pub_date).getTime() - new Date(d1.pub_date).getTime());\n    this.setState({ hits: filtered_hitzone });\n    console.log(filtered_hitzone);\n  }\n\n  renderRaise(number) {\n    const isPositive = number > 0;\n    const isNegative = number < 0;\n\n    return (\n      <span\n        style={{\n          paddingLeft: 15,\n          color: isNegative ? 'red' : 'green'\n        }}\n      >\n        <span>{isPositive ? '+' : null}</span>\n        <span>{number}</span>\n      </span>\n    );\n  }\n\n  render() {\n    return (\n      <div className='tableShadow'>\n        <Table\n          height={1070}\n          width={1050}\n          data={this.state.hits}\n          onRowClick={data => {\n            console.log(data);\n          }}\n        > \n          <Column width={600} resizable>\n            <HeaderCell>Incident</HeaderCell>\n            <Cell dataKey=\"comment\" />\n          </Column>\n\n          <Column width={100} fixed>\n            <HeaderCell>Hulpdienst</HeaderCell>\n            <Cell dataKey=\"emergency_service\" />\n          </Column>\n\n          <Column width={160} fixed>\n            <HeaderCell>klant</HeaderCell>\n            <Cell dataKey=\"name\" />\n          </Column>\n\n          <Column width={180} fixed>\n            <HeaderCell>datum</HeaderCell>\n            <Cell dataKey=\"pub_date\" />\n          </Column>\n\n        </Table>\n      </div>\n    );\n  }\n}\n\nexport default IncidentList;\n","import React from 'react';\nimport { List, Table } from 'rsuite';\nimport { getClientLocations, removeClientLocation } from '../services/api';\n\n\nconst { Column, HeaderCell, Cell, Pagination } = Table;\n\n\nclass ClientTable extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      clients: []\n    };\n  }\n\n  async componentDidMount() {\n    const results = await getClientLocations();\n\n    this.results = results.data;\n    const clients = results.data;\n    const client_fields = []\n    const client_length = clients.length\n    for (var i = 0; i < client_length; i++) {\n      client_fields.push(clients[i].fields);\n    }\n    this.setState({ clients: client_fields });\n    // console.log(results)\n    // console.log(client_fields);\n    \n  }\n\n  render() {\n    return (\n      <div className='tableShadow'>\n        <Table\n          height={480}\n          width={800}\n          data={this.state.clients}\n          onRowClick={data => {\n            console.log(data);\n          }}\n        >\n          <Column width={200} fixed>\n            <HeaderCell>Klantnaam</HeaderCell>\n            <Cell dataKey=\"name\" />\n          </Column>\n\n          <Column width={220} fixed>\n            <HeaderCell>Adres</HeaderCell>\n            <Cell dataKey=\"address\" />\n          </Column>\n\n          <Column width={250} fixed>\n            <HeaderCell>comment</HeaderCell>\n            <Cell dataKey=\"description\" />\n          </Column>\n\n          <Column width={120} fixed=\"right\">\n            <HeaderCell>Actie</HeaderCell>\n\n            <Cell>\n              {rowData => {\n                function handleAction() {\n                  alert(`id:${rowData.id}`);\n                }\n                return (\n                  <span>\n                    <a onClick={handleAction}> Edit </a> |{' '}\n                    <a onClick={handleAction}> Remove </a>\n                  </span>\n                );\n              }}\n            </Cell>\n          </Column>\n        </Table>\n      </div>\n    );\n  }\n}\n\nexport default ClientTable;\n","import mapboxgl from '!mapbox-gl'; // eslint-disable-line import/no-webpack-loader-syntax\nimport React from 'react';\nimport { getClientLocations, getIncidentHits } from '../services/api';\nimport './Application.js'\n\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOXGL_ACCESS_TOKEN;\n\n\nclass Minimap extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        lng: 5.8,\n        lat: 52,\n        zoom: 7,\n        user: '',\n        clients: [],\n        incidents: []\n      };\n    }\n\n    async componentDidMount() {\n        const map = new mapboxgl.Map({\n            container: this.mapContainer,\n            style: 'mapbox://styles/kdebrauw/ckaxjbuh50ohl1ioo470azefc',\n            center: [this.state.lng, this.state.lat],\n            zoom: this.state.zoom\n        })\n\n        //call incidents & client list api's\n        const results = await getClientLocations();\n        const results_i = await getIncidentHits();\n        \n        // client locations\n        this.results = results.data;\n        const clients = results.data;\n        const client_fields = []\n        const client_length = clients.length\n        for (var i = 0; i < client_length; i++) {\n          client_fields.push(clients[i].fields);\n        }\n        this.setState({ clients: client_fields });\n        \n        // incidents\n        this.results_i = results_i.data;\n        const hitzone = results_i.data;\n        const es = ['ambu']\n        const filtered_hitzone = hitzone.filter(function(item){\n            return es.indexOf(item.emergency_service)}) \n        filtered_hitzone.sort((d1, d2) => new Date(d2.pub_date).getTime() - new Date(d1.pub_date).getTime());\n        this.setState({ hits: filtered_hitzone});\n        \n        \n        //add both arrays to mapsource\n        await map.addSource('incidenten', {\n            type: 'geojson',\n            data: jsonToGeoJson(this.state.hits)\n          });\n        \n       await map.addSource('clients', {\n            type: 'geojson',\n            data: clientJsonToGeoJson(client_fields)\n        });\n        \n\n        //add both sources as map layers \n        await map.addLayer({\n            id: 'locaties_waddan',\n            type: 'circle',\n            source: 'incidenten',\n            paint: {\n              'circle-radius': 5,\n              'circle-stroke-color': '#2A3C47',\n              'circle-stroke-width': 1,\n              'circle-color': [\n                'match',\n                ['get', 'emergency_service'],\n                'ambu',\n                '#EFDC23',\n                'br',\n                '#D13620',\n                'pol',\n                '#2134BE',\n                'unknown',\n                '#3bb2d0',\n                /* other */ '#3C3C3D'\n              ]\n            }\n          });\n        \n        await map.addLayer({\n            id: 'klant_locaties',\n            type: 'circle',\n            source: 'clients',\n            paint: {\n              'circle-radius': 8,\n              'circle-stroke-color': '#2A3C47',\n              'circle-stroke-width': 1,\n              'circle-color': '#2EAD5D'\n            }})\n\n\n        map.on('mouseenter', 'locaties_waddan', function (e) {\n          map.getCanvas().style.cursor = 'pointer';\n\n          var coordinates = e.features[0].geometry.coordinates.slice();\n          var comment = e.features[0].properties.comment\n          var pub_date = e.features[0].properties.pub_date\n\n          console.log(comment)\n          popup_extra\n            .setLngLat(coordinates)\n            .setHTML(\n              '<H4> Incident </H4>' +\n              comment +\n              '<br><br> Datum: ' +\n              pub_date\n            ).addTo(map)\n        })\n\n        map.on('mouseleave', 'locaties_waddan', function () {\n          map.getCanvas().style.cursor = '';\n          popup_extra.remove();\n        });\n\n        map.on('mouseenter', 'klant_locaties', function (e) {\n          map.getCanvas().style.cursor = 'pointer';\n          \n          var coordinates = e.features[0].geometry.coordinates.slice();\n          var name = e.features[0].properties.name\n          var locatie = e.features[0].properties.address\n\n          popup_extra\n            .setLngLat(coordinates)\n            .setHTML(\n              '<H3> Klant </H3>' + name\n              + '<br><br> Adres: ' + locatie\n            ).addTo(map)\n        })\n\n        map.on('mouseleave', 'klant_locaties', function () {\n          map.getCanvas().style.cursor = '';\n          popup_extra.remove();\n        });\n\n        var popup_extra = new mapboxgl.Popup({\n          closeButton: false,\n          closeOnClick: false\n        });\n\n\n        //function: transform incidents to geojson\n        function jsonToGeoJson(e) {\n            var geojson = {\n              type: 'FeatureCollection',\n              features: []\n            };\n            var length = Object.keys(e).length;\n\n            for (var i = 0; i < length; i++) {\n                var location = e[i].location\n                var regex = /\\d{1,}.\\d{4,}\\s\\d{1,}.\\d{4,}/;\n                var location_filtered = location.match(regex)\n                var located = location_filtered[0]\n                var locatid = located.split(' ')\n                var locilized = []\n                locilized.push(locatid[0])\n                locilized.push(locatid[1])\n                // var locateded = '[' + located + ']'\n\n              geojson.features.push({\n                type: 'Feature',\n                geometry: {\n                    type: 'Point',\n                    coordinates: locilized\n                },\n                properties: {\n                    monitorcode: e[i].monitorcode,\n                    comment: e[i].comment,\n                    emergency_service: e[i].emergency_service,\n                    priority_code: e[i].priority_code,\n                    region: e[i].region,\n                    pub_date: e[i].pub_date\n                }\n                 });\n                \n            }\n            console.log(geojson)\n            return geojson;\n        }\n\n        //function: transform clients to geojson\n        function clientJsonToGeoJson(e) {\n            var geojson = {\n                type: 'FeatureCollection',\n                features: []\n              };\n            var length = Object.keys(e).length;\n            \n            for (var i = 0; i < length; i++) {\n                var location = e[i].client_location\n                var regex = /\\d{1,}.\\d{4,}\\s\\d{1,}.\\d{4,}/;\n                var location_filtered = location.match(regex)\n                var located = location_filtered[0]\n                var locatid = located.split(' ')\n                var locilized = []\n                locilized.push(locatid[0])\n                locilized.push(locatid[1])\n                geojson.features.push({\n                    type: 'Feature',\n                    geometry: {\n                        type: 'Point',\n                        coordinates: locilized\n                    },\n                    properties: {\n                        name: e[i].name,\n                        address: e[i].address,\n                    }\n              });\n              \n            } \n            return geojson;\n        }\n    }\n\n      \n\n\n\n    render(){\n        return (\n            <div ref={el => (this.mapContainer = el)} className=\"minimapPosition\" />\n        )\n    }\n\n\n}\n\n\n\nexport default Minimap","import React from 'react';\n\nimport IncidentList from './IncidentList';\nimport ClientTable from './ClientTable';\nimport Minimap from './Minimap';\nimport logo_regular from '../../src/assets/logo_regular.png';\n//this will be the account dashboard\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: ''\n    };\n  }\n\n  render() {\n    return (\n      <div style={{\n        backgroundImage: `url(\"https://i.imgur.com/LBBgqfE.png\")`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        width: '100vw',\n        height: '100vh'\n      }}>\n        <div className='dashboardHolder'>\n          <img src={logo_regular} alt=\"Logo\" className='logoDashboard'/>\n        </div>\n        <div>\n        \n        </div>\n        <div className=\"incidentWidth\">\n            <IncidentList />\n        </div>\n        <div className=\"minimapPosition\">\n          <Minimap />\n        </div>\n        <div className=\"clientWidth\">\n          <ClientTable />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n","// we use this component to make a route private\n\nimport React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\n\nfunction PrivateRoute({ component: Component, authed, ...rest }) {\n  console.log('user is logged in: ' + authed);\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        authed === true ? (\n          <Component {...props} />\n        ) : (\n          <Redirect\n            to={{ pathname: '/login', state: { from: props.location } }}\n          />\n        )\n      }\n    />\n  );\n}\n\nexport default PrivateRoute;\n","import React from 'react';\nimport {\n  Button,\n  ButtonToolbar,\n  ControlLabel,\n  Form,\n  FormControl,\n  FormGroup,\n  HelpBlock\n} from 'rsuite';\n\n//determines current environment for api calls & homepage routing\nvar current_environment = window.location.origin;\n\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\n\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: '',\n      password: ''\n    };\n  }\n\n  handle_change = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n\n    this.setState(prevstate => {\n      const newState = { ...prevstate };\n      newState[name] = value;\n      console.log(newState);\n\n      return newState;\n    });\n  };\n\n  handle_login = (e, data) => {\n    e.preventDefault();\n    fetch(`${apiUrl}/token-auth/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    })\n      .then(res => res.json())\n      .then(json => {\n        if (json.token !== undefined) {\n          localStorage.setItem('token', json.token);\n        }\n        this.setState({\n          username: json.user.username\n        });\n        console.log('user: ' + json.user.username);\n        // console.log(json.token, typeof json.token)\n        // console.log(this.state.username)\n\n        // console.log(body)\n\n        // redirect to homepage\n        window.location.href = `${current_environment}`;\n      })\n      .catch(error => {\n        return error;\n      });\n  };\n\n  //test\n\n  render() {\n    return (\n      <Form fluid>\n        <div>\n          <h4\n            style={{\n              color: '#2A3C47',\n              top: '40px'\n            }}\n          >\n            Login\n          </h4>\n        </div>\n\n        <br />\n        <FormGroup>\n          <ControlLabel>Username</ControlLabel>\n          <FormControl\n            name=\"username\"\n            onChange={(value, event) => {\n              this.handle_change(event);\n            }}\n          />\n          {/* <HelpBlock>Required</HelpBlock> */}\n        </FormGroup>\n        <FormGroup>\n          <ControlLabel>Password</ControlLabel>\n          <FormControl\n            name=\"password\"\n            type=\"password\"\n            onChange={(value, event) => {\n              this.handle_change(event);\n            }}\n          />\n          {/* <HelpBlock>Required</HelpBlock> */}\n        </FormGroup>\n        <FormGroup>\n          <ButtonToolbar>\n            <Button\n              color=\"blue\"\n              onClick={e => this.handle_login(e, this.state)}\n            >\n              Login\n            </Button>\n            <Button appearance=\"default\" disabled>\n              Sign up\n            </Button>\n            <HelpBlock tooltip>Sign up coming soon!</HelpBlock>\n          </ButtonToolbar>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default LoginForm;\n\n// LoginForm.propTypes = {\n//   handle_login: PropTypes.func.isRequired\n// };\n","// LOGIN PAGINA\n\nimport React from 'react';\n\nimport LoginForm from './LoginForm';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      logged_in: '',\n      url: 'https://i.imgur.com/f59aONW.png'\n    };\n\n    this.handleLoginChange = this.handleLoginChange.bind(this);\n  }\n\n  handleLoginChange(value) {\n    this.setState({ logged_in: value });\n  }\n\n  render() {\n    return (\n      <div\n        style={{\n          backgroundImage: `url(\"https://i.imgur.com/f66MsTC.png\")`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat',\n          width: '100vw',\n          height: '100vh'\n        }}\n      >\n        <div>\n          <div className=\"loginExplainer\">\n            <div>\n              <img\n                className=\"logo_home\"\n                src=\"https://i.imgur.com/f59aONW.png\"\n                alt=\"Logo Incidentradar\"\n              />\n            </div>\n            <div className=\"introbarStyle\">\n              <div>\n                Verzekeraar, projectontwikkelaar, buurtwacht of beveiliging? De\n                Incidentradar helpt sneller en adequater te reageren op\n                incidenten om zo negatieve effecten te verminderen en preventie\n                te verbeteren.{' '}\n              </div>\n              <br />\n              <br />\n              <div>Gebruik de Incidentradar om.. </div>\n              <div>\n                1. .. automatisch gewaarschuwd te worden als er een incident\n                plaatsvindt bij een van je gekozen locaties, waardoor je sneller\n                kan reageren en eventuele schade kan beperken.\n              </div>\n              <div>\n                2. .. de eigen risicoanalyse te verdiepen met extra informatie.{' '}\n              </div>\n              <div>\n                3. .. locatie gerelateerde risico inzichten op basis van\n                historische data te krijgen. (toekomst)\n              </div>\n              <br />\n              <br />\n              <br />\n              <br />\n              <br />\n              <div>\n                De Incidentradar is op dit moment in Private Beta.\n                Genteresseerd in een demo? Stuur een bericht naar\n                koen@cartha.io.{' '}\n              </div>\n            </div>\n            <div className=\"loginHolder\">\n              <div></div>\n              <div>\n                <LoginForm handleLoginChange={this.handleLoginChange} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","// Dit wordt de automatische routing file die kijkt of de gebruiker\n// naar home (index.js) of login (login.js) gaat\n//\n\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { Button, ButtonToolbar, Header } from 'rsuite';\n\nimport Application from './components/Application';\nimport Dashboard from './components/Dashboard';\nimport PrivateRoute from './components/PrivateRoute';\nimport Login from './components/Login';\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\nclass AppRoute extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      displayed_form: '',\n      logged_in: localStorage.getItem('token') ? true : false,\n      username: ''\n    };\n  }\n\n  componentDidMount() {\n    // @Koen: Deze lifecycle hook werd nooit aangeroepen vanwege de hoofdletter C\n    //if logged in, change username in state\n    // naast naam aanmaken doet dit niets volgens mij.\n    // iets vergelijkbaars aanmaken om extra controle uit te voeren\n    if (this.state.logged_in) {\n      fetch(`${apiUrl}/scraper/current_user/`, {\n        headers: {\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        }\n      })\n        .then(res => res.json())\n        .then(json => {\n          this.setState({ username: json.username });\n          this.setState({ logged_in: true });\n        });\n    }\n  }\n\n  // SIGNUP NOT YET IMPLEMENTED\n  // handle_signup = (e, data) => {\n  //   e.preventDefault();\n  //   fetch('http://localhost:8000/scraper/UserList/', {\n  //     method: 'POST',\n  //     headers: {\n  //       'Content-Type': 'application/json'\n  //     },\n  //     body: JSON.stringify(data)\n  //   })\n  //     .then(res => res.json())\n  //     .then(json => {\n  //       localStorage.setItem('token', json.token);\n  //       this.setState({\n  //         logged_in: true,\n  //         displayed_form: '',\n  //         username: json.username\n  //       });\n  //     });\n  // };\n\n  handle_logout = () => {\n    localStorage.removeItem('token');\n    this.setState({ logged_in: false, username: '' });\n  };\n\n  render() {\n    return (\n      <Router>\n        <div>\n          {/* <Nav className='nav' /> */}\n          <Header>\n            <div>{/* <h1 className='title'>Incidentradar</h1> */}</div>\n            <div className=\"navbarStyle\">\n              <ButtonToolbar>\n                {/* {this.state.logged_in === true && <Link to=\"/\"><Button>Home</Button></Link>}\n                {this.state.logged_in === true && <Link to=\"/dashboard\"><Button>Dashboard</Button></Link>} */}\n                {this.state.logged_in === true && (\n                  <Button onClick={this.handle_logout}>Logout</Button>\n                )}\n                {/* <IconButton icon={<SearchIcon />}>Find address</IconButton> */}\n              </ButtonToolbar>\n            </div>\n          </Header>\n\n          <PrivateRoute\n            authed={this.state.logged_in}\n            exact\n            path=\"/\"\n            component={Application}\n          />\n          <Route\n            handleLoginChange={this.handleLoginChange}\n            path=\"/login\"\n            component={Login}\n          />\n          <PrivateRoute\n            authed={this.state.logged_in}\n            exact\n            path=\"/dashboard\"\n            component={Dashboard}\n          />\n          {/* <Route component={ErrorMessage} /> */}\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default AppRoute;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'rsuite/dist/styles/rsuite-default.css';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './site.css';\n\nimport AppRoute from './AppRoute';\n\nReactDOM.render(<AppRoute />, document.getElementById('root'));\n"],"sourceRoot":""}